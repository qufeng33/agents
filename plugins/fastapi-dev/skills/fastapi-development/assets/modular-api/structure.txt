# 模块化项目结构（按领域组织）
# 适用于：中大型项目、团队开发、长期维护、> 20 个文件

app/
├── __init__.py
├── main.py                 # 应用入口
├── config.py               # 全局配置
├── dependencies.py         # 全局共享依赖
├── exceptions.py           # 全局异常基类
│
├── api/                    # API 版本管理
│   └── v1/
│       ├── __init__.py
│       └── router.py       # v1 路由聚合
│
├── modules/                # 功能模块（按领域划分，单数命名）
│   ├── __init__.py
│   │
│   ├── user/               # 用户模块（完全自包含）
│   │   ├── __init__.py
│   │   ├── router.py       # 路由（HTTP 处理）
│   │   ├── schemas.py      # Pydantic 模型
│   │   ├── models.py       # ORM 模型
│   │   ├── repository.py   # 数据访问层
│   │   ├── service.py      # 业务逻辑层
│   │   ├── dependencies.py # 模块依赖注入
│   │   └── exceptions.py   # 模块异常
│   │
│   ├── item/
│   │   └── ...
│   │
│   └── order/
│       └── ...
│
├── core/                   # 核心基础设施
│   ├── __init__.py
│   ├── database.py         # 数据库连接
│   ├── security.py         # 认证加密
│   └── cache.py            # 缓存配置
│
└── tests/
    ├── conftest.py
    ├── test_user.py
    └── test_item.py

# 分层架构：
# Router → Service → Repository → Database
#   ↓         ↓           ↓
# HTTP处理  业务逻辑    数据访问

# 命名约定：
# - 模块目录使用单数（user, item, order）
# - API 资源路径使用复数（/users, /items, /orders）
# - 类名使用单数（User, UserService, UserRepository）

# 特点：
# - 每个模块完全自包含（router/schema/service/repository/model）
# - 清晰的分层：Router → Service → Repository
# - 便于测试：可以单独 mock repository
# - 修改一个功能只需改一个目录
# - 便于团队分工，减少冲突
