# 简单项目结构（按层组织）
# 适用于：小项目、原型验证、单人开发、< 20 个文件

app/
├── __init__.py
├── main.py              # 应用入口（直接配置，无需工厂模式）
├── config.py            # 配置管理（pydantic-settings）
├── dependencies.py      # 共享依赖（DBSession 等类型别名）
├── exceptions.py        # 异常定义
│
├── routers/             # 路由层（按资源划分）
│   ├── __init__.py
│   └── users.py         # HTTP 处理，注入 Service
│
├── schemas/             # Pydantic 模型
│   ├── __init__.py
│   ├── response.py      # BaseSchema, ApiResponse, ApiPagedResponse
│   └── user.py          # UserCreate / UserResponse
│
├── services/            # 业务逻辑
│   ├── __init__.py
│   └── user_service.py  # 业务规则（含软删除查询）
│
├── models/              # ORM 模型
│   ├── __init__.py
│   └── user.py          # 继承 Base（UUIDv7+软删除+时间戳）
│
└── core/                # 核心基础设施
    ├── __init__.py
    ├── database.py      # Base（UUIDv7+软删除+时间戳）、get_db()、filter_active()
    ├── error_codes.py   # 错误码定义
    └── security.py      # 密码哈希

# 与模块化结构的区别：
# - main.py 直接配置中间件和路由，无需 setup_xxx 函数
# - 无 api/v1/ 版本管理
# - 无 modules/ 按领域划分
# - Service 直接操作 DB（无 Repository 层）
# - 无 AuditMixin（简化版不含审计字段）

# 分层架构：
# Router → Service → Database
#   ↓         ↓
# HTTP处理  业务逻辑（事务由 get_db() 自动管理）

# ORM 基类特性（Base）：
# - id: UUIDv7 主键（时间有序，分布式友好）
# - created_at, updated_at: 时间戳（带时区，UTC）
# - deleted_at: 软删除
# - soft_delete(), restore(), is_deleted

# 软删除查询：
# - filter_active(stmt): 过滤已删除记录
# - Service 层默认排除已删除

# 特点：
# - 同类文件放在一起（所有 router 放 routers/）
# - 简单直接，容易理解
# - 适合快速开发
